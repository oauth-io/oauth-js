<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Oauth.io</title>    
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <link rel="stylesheet" href="stylesheets/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script src="javascripts/bootstrap.min.js"></script>
    <script src="javascripts/oauth.js"></script>

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Google Analytics -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-42196684-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>


    <!-- Boiletplate scripts (provider list / select event...) -->
    <script src="javascripts/oauth-boilerplate.js"></script>
    

    <!-- Authorize using OAuth.io when click on 'Connexion' button -->
    <script type="text/javascript">
      $(function() {   

        // Callback for redirect method
        OAuth.callback(function (error, success)
        {          
          if (error)
          {
            $('#result').html("// Result <br /><br />" + error);
          }
          else
          {                               
            $('#result').html("// Result <br /><br />" + JSON.stringify(success, undefined, 2));      
          }
          
          $('#popup_method').removeClass('active');
          $('#redirect_method').addClass('active');
          $('#provider_actions .btn-group .active').trigger('click');
          $('.provider').html(success.provider);
          $('#result').show();          
        });


        // Initialize OAuth with the public key
        OAuth.initialize('qb24rqcWu7g5eAUJ2IU6px8WkYE');        

        $('#btConnect').click(function(e){
          e.preventDefault();

          var oauthMethod = $('#provider_actions .btn-group .active').text();          
          var oauthProvider = $('#connectTo').text().toLowerCase();

          if (oauthMethod == 'Popup')
          {
            OAuth.popup(oauthProvider, function(error, success){
              if (success) {
                $('#result').html("// Result <br /><br />" + JSON.stringify(success, undefined, 2));              
              }
              else {
                $('#result').html("// Result <br /><br />" + error);
              }
              $('#result').show();
            });
          }
          else
          {
            OAuth.redirect(oauthProvider, 'http://oauth-io.github.io/oauth-js');
          }

        });
      });
    </script>
  </head>
  <body>
    <div class="wrapper">
      <header>
        <div class="row">
          <img src="http://oauth-io.github.io/oauth-js/images/logo_v1.png" width="110"/>
          <p class="view"><a href="https://oauth.io">Visit the website</a></p>
        </div>

        <div class="row">
          <span>APIs supported</span>
        </div>

        <div class="row" id="providers">          
        </div>
      </header>
      <section>
        <div class="row">
          <h3>
            <a name="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages"><span class="octicon octicon-link"></span></a>Serverless OAuth is now possible
          </h3>
        </div>
        <div class="row">
          <div class="btn-group">
            <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
              Select a provider
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu" id="providers-menu">              
            </ul>
          </div>
          
          <div id="provider_actions" style="display:inline-block;"> 
            <div class="btn-group" data-toggle="buttons-radio">
              <button type="button" class="btn btn-default active" id="popup_method">Popup</button>
              <button type="button" class="btn btn-default" id="redirect_method">Redirect</button>              
            </div>
            <button class="btn btn-primary" type="button" id="btConnect">Connect to <span id="connectTo" style="text-transform:capitalize;"></span></button>         
          </div>
        </div>
        <div class="row">
          <br /><p>It's just a boilerplate, we don't save any information on you!</p>
        </div>
        <hr />
        <div class="row">
          <h4>How to use OAuth.io SDK? it's really simple!</h4>
          <p>After loading oauth.js, you can use <code>OAuth</code> object to authorize your user like this:</p>
          <pre id="code">// Initialize with your OAuth.io app public key
OAuth.initialize('<span class="text-success"><strong>Public key</strong></span>');
OAuth.popup('<span class='provider'>provider</span>', function(error, success){
  // See the result below
});</pre>

          <pre id="result">            
          </pre>
        </div>
        <div class="row">
          <a href="https://github.com/oauth-io/oauth-js/tree/gh-pages">See the source of this page on Github</a>
        </div>

        <div class="row">
          <br /><p><strong>powered by <a href="https://oauth.io">OAuth.io</a> & <a href="http://webshell.io">Webshell</a></strong></p>
        </div>
      </section>
    </div>
    <script src="javascripts/scale.fix.js"></script>
  </body>
</html>